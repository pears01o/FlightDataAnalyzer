Changes
=======

The highlighted changes are shown for the following production releases. Each
release will have included many additional new features and improvements.

You can view the differences in tagged versions as follows:

  git log --pretty=format:"%Cblue%h %Cgreen%cn %Cred(%cr) %Creset%s %n%b %N" --graph "v0.3.2..v0.4.1"

=======
v0.43.2
-------
 Fixes:
 - StableApproachStages allows phase to be missing to avoid exception

=======
v0.43.1
-------
 New KPVs:
 - AE-2085 New helideck takeoff procedure KPVs
 - AE-2126 DH Selected At 1500 Ft LVO for Falcon-7X & 8X only
 - AE-2114 TCAS RA KPVs split into multiple flight levels
 Improvements:
 - AE-2157 Speedbrake Deployed custom threshold for MD-11
 - AE-2092 Stable Approach logic changed specifically for BAE 146-301
 - AE-2152 Hover repairs Groundspeed where data quality is low
 - AE-2116 Helicopter segment type identification improved to incorporate Collective
 - AE-2121 Airspeed Minus V2 improved to select most appropriate V2 source
 - AE-2113 TCAS minimum operating height increased from 360 to 900ft AAL
 Fixes:
 - AE-2117 Altitude AAL At First Flap Extension Whilst Airborne ignores masked Flap
 - AE-2140 Top Of Climbs are not ignored if Altitude STD > 1000ft for helicopters
 - AE-2105 Altitude Radio handles power of two data jumps
 - AE-2074 Don't apply smoothing if Go Around occured above 500ft Radio and there's no Localizer

v0.42.1
-------
 New KPVs
 - AE-1267 new event speed below minimum clean speed (event to monitor flap retraction schedule)
 - AE-1950 New Event Spoiler Deployed Insufficient Duration
 - AE-1961 Simple Autoland KPV + Event - Number of AP Channels engaged at touchdown
 Improvements:
 - AE-1905 make precise_timestamp less strict
 - AE-1910 Preflight checks event triggered when the checks have been performed
 - AE-1973 TCAS analysis reports too many changes of altitude rate
 - AE-1983 triggering spurious Flap 5 Including transition events
 Fixes:
 - AE-1796 Visualisation underground when Altitude STD is negative
 - AE-1895 Missing Unstable Approach
 - AE-1968 Derived speedbrake deployed parameter not reading deployed when speedbrake handle or spoilers are deployed.
 - AE-2005 undefined errors
 - AE-2006 fallback_dt timezone issue fix
 - AE-2011 File Splitting Problem
 - AE-2045 Segment FlapIncludingTransition Unidentified Error

v0.41.10
--------
 - AE-2013 Airspeed with Conf 1+F excluding transition Max KPV
 - AE-2036 Flight Number filters invalid characters
 - AE-2037 Embraer 170/175 Overweight Hard Landing Max Vert parameters and KPVs

v0.41.9
-------
 - AE-1267 MinimumCleanLookup and MinimumAirspeed fixed for Airbus

v0.41.8
-------
 - AE-1929 RollRateAtTouchdownLimit KPV fix

v0.41.7
-------
 - AE-1267 Fixes and improvements

v0.41.6
-------
 - AE-1267 New event to monitor flap retraction schedule

v0.41.5
-------
 - AE-250 Reworked Airbus Configuration parameter
 - AE-1831 Flap Including Transition rework included
 - AE-1929 RollRateAtTouchdownLimit KPV fix
 - AE-1902 Fuel Quantity Low Warning - change to Airborne only

v0.41.4
-------
 - Fix: re-added commits which were part of the master branch history, but the changes were not applied

v0.41.3
-------
 - Fix: ApproachFlightPathAngle handles masked arrays and Go Arounds

v0.41.2
-------
 - Fix: TCAS RA Phase noe operates with only RA signal
 - Fix: TCAS RA amended to reflect Up and Down advisory status as well as Combined Control flags
 - Fix: TCAS event not being triggered due to Boeing Drop Track logic
 - Fix: Alternative forms of Resolution Advisory added

v0.41.1
-------
 - New KPV:
   - AE-1816 Added new KPV EngTorqueWithin1SecOfTouchdownMax
   - AE-1854 New KPV: AT Disengaged AP Engaged Duration
 - Improvements:
   - AE-1640 Flight then engines off then RTO in one segment and graph
   - AE-1852 Invalid segment type added where flight splitting parameters are invalid.
   - AE-1926 Various TCAS KPV and event improvements including not triggering incorrectly close to takeoff and landing
 - Bug Fixes:
   - AE-1176 Fix: Rejected Takeoff TXX002 events not triggering when Longitudinal Acceleration doesn't drop to approximately zero before takeoff
   - AE-1712 Fix: Tailwind Hi events to not trigger during rotation or while in ground effect
   - AE-1743 Fix: Longitude Smoothed being incorreclty masked when overflowing between 180 and -180
   - AE-1813 Fix: Hard Landing event not triggering in certain circumstances when Altitude Radio is missing
   - AE-1831 Fix: AirspeedWithFlap KPV not working as expected - triggering invalid events
   - AE-1871 Fix: FuelQty can_operate method
   - AE-1873 Fix: handling masked sections greater than 10 seconds in Latitude and Longitude Smoothed
   - AE-1883 Fix: H175 flight splitting to identify multiple flights within the same data file
   - AE-1885 Fix: problem with Vertical Speed Inertial
   - AE-1886 Fix: Missed hard landing after bounce
   - AE-1895 Fix: Missing Unstable Approach
   - AE-1899 Fix: Flap not set at first movement triggering incorrectly by switching to Flap Including Transition and an 8 kts mobile threshold
 - Other changes:
   - Fix: align returned engine parmeter index
   - Fix: split: fix for None / float TypeError
   - Fix: takeoff config KPVs selects the last 'Movement Start' slice before 'Liftoff'
   - Fix: TouchdownToSpoilersDeployedDuration: returns a 0 second value if not deployed
   - Fix: track_to_kml: fix kti.name to kpv.name
   - Improvments: Eng N1 500-50ft include last 5 secs
   - Improvments: FuelQty: restrict validit check to Airborne

v0.40.8
-------
  - AE-1793: replace Acceleration Normal parameter with Acceleration Normal At Touchdown KPV 
  - AE-1793: change output of requested KPV - should return difference between acceleration normal touchdown and limit

v0.40.7
-------
  - AE-1811: Remove angle from Flap Lever KPV

v0.40.6
-------
  - AE-1530: DualInput threshold set to 2.0deg for all Airbus aircraft

v0.40.5
-------
  - AE-1861: Added GroundspeedWithThrustReversersDeployedAnyPowerMin KPV

v0.40.4
-------
  - Modified FlapSynchroAsymmetry KPV to generate single KPV per flight with no 7deg limit

v0.40.3
-------
  - VLSLookup fixed to only be operable for supported fleets

v0.40.2
-------
  - AE-1846: Added ThrustRatingCLB1Duration KPV

v0.40.1
-------
  - AE-1732: Added Gas Temp during Takeoff and MCP events

v0.39.1
-------
  - AE-1543: VLS Lookup tables
  - AE-1691: Runway Headings Sometimes Reversed
  - AE-1837: Distance to landing parameter broken
  - AE-1456: Headwind and wind direction derived parameters issues
  - AE-1733: EngN2MaxDuringTakeoff and EngN2MaxDuringMaximumContinuousPower KPVs and tests

  Other Fixes:
  - EngOilPressMax: KPV end limit to Touchdown
  - EngN1For5Sec500To50FtMin: require correct min samples
  - Added exception handling for gross weight repair
  - add kpvs and tests: FlapLeverAtGearUpSelectionDuringGoAround and FlapLeverAtGearDownSelection
  - New Embraer-specific KPV AccelerationNormalAboveWeightLimitAtTouchdown plus tests
  - add kpv and tests for aispeed above 101% rotor speed
  - CoordinatesSmoothed: low_point fallback if ApproachRange masked and find last valid ApproachRange sample
  - TakeoffConfigurationWarningDuration: handle Movement after Liftoff
  - ThrottleLeverVariation...: handle masked lever

v0.38.10
--------
  - TakeoffConfigWarningDuration is excluded for Airbus aircraft

v0.38.9
-------
  - AE-1667 New Event - Counting Automatic Power Reserve activations
  - AE-1729 Add ability to print the ordered tree
  - AE-1663/1664 Fixes for Acceleration and Pitch KPVs for AW139s
  - AE-1741 Track Deviation From Runway fix
  - AE-1738 New event - Hard Landing Roll Rate vs Aircraft Landing Weight
  - AE-1755 Flap asymmetry synchro event
  - AE-1626 Altitude ADH fix
  - AE-1669 EngOilPressMax KPV improvements

  Other Fixes:
  - EngNpforXSecMaximumContinuousPowerMax (add 20 secs)
  - EngNpDuringTakeoff5MinRatingMax includes Go Around 5 Min Rating
  - Drift: derive from Heading Continuous rather than Heading
  - Add the missing parameters to WRAPPING_PARAMS

v0.38.8
-------
  - AE-1753 Takeoff Configuration Warning KPVs will now trigger at any time the aircraft is on the ground.

v0.38.7
-------
  - process_flight requested_only option fixes

v0.38.6
-------
  - Revert "Ae 1669 oil press (#165)"
  - Revert "Modified EngOilPressMax KPV to work without KTIs"

v0.38.5
-------
  - AE-1667 Modified derive method in TakeoffAccelerationStart to work for single slices.
  - AE-1604 ThrustAsymmetry now uses N1 in preference over EPR. Added test case.
  - AE-1648 C208 set derived Flap parameter to 40 below 500ft AAL
  - AE-1627 Fix for AccelerationNormalMinusLoadFactorThreshold KPV
  - AE-1656: change Taxiing dependency Rejected Takeoff to be optional
  - AE-1669 extended EngOilPressMax KPV now covers whole flight instead of just 'Airborne' phase.
  - AE-1669 Modified EngOilPressMax KPV to work without KTIs
  - AE-1685 Changes in logic to work for new FADEC parameters on E-Jets
  - AE-1675 Fix forFlapWithSpeedbrakeDeployedMax for 737MAX
  - AE-1729: Approach Information a required dependency of Smoothed parameters, touchdown point alignment fix
  - AE-1696 New KPV EngTorqueExceeding110Percent
  - AE-1697 New KPV EngTorqueAbove90KtsMax
  - process_flight: only_requested option to override process_order
  - process_flight: fix for deriving requested_only
  - process_flight: change only_requested kwarg name to requested_only
  - fix slices with odd numbered indices breaking blend_parameters_cubic
  - local api: add aeroplane to Aircraft Type (G-FDSL)

v0.38.4
-------
  - AE-1641: Fix for Vertical Speed Inertial

v0.38.3
-------
  - Fix for TakeoffAccelerationStartKTI

v0.38.2
-------
  Jira Tickets:
  - AE-1667: Eng APR Duration
  - AE-1672: E170 force flap lever 5 on approach

v0.38.1
-------
  Jira Tickets:
  - AE-1215: GearUpInTransition: Change Fast to Airborne
  - AE-1257: Helicopter approaches offshore
  - AE-1457: New Event- Airspeed relative low to Airspeed Selected
  - AE-1470: Problem - gap in data is wrong length, and has triggered invalid event
  - AE-1487: 3 New Events Airspeed With Flap Excluding Transition, 5, 15, 35 Max
  - AE-1509: Added precise_timestamp flag
  - AE-1528: Merge Latitude and Longitude sources where two available
  - AE-1556: Helicopter: Derived parameter 'Gear-on-Ground' and 'Grounded' phase error
  - AE-1557:  Changed EngN1For5Sec500To50FtMin to stop using second_window and added unit tests
  - AE-1562: Groundspeed Speedbrake Handle During Takeoff Max(KPV) 
  - AE-1565, AE-1343 & AE-1331: ILS established phase improvement and new ILS localizer/glideslope KPVs
             Added new KPVs: 
                 ILSGlideslopeEstablished1000To200Ft
                 ILSGlideslopeEstablished500To200Ft
                 ILSLocalizerEstablished1000To200Ft
                 ILSLocalizerEstablished500To200Ft
  - AE-1589: KPV adjustment to monitor Flaps in Transition to a reading of 0.1 degrees
             fix AirspeedWithFlapMax KPV to include new Boeing requirements
  - AE-1594: Wind Direction Averaging corrections as averages through North give incorrect answers.
  - AE-1595: P and W Engine Torque Events
  - AE-1596: New Prop Overspeed Events
  - AE-1597: New Event B737 Hard Overweight Landing.
  - AE-1603: Deriving Speedbrake from spoilers and updated Speedbrake Selected for B777
  - AE-1625: Masking Airspeed single values which cause invalid flap events to trigger for AirspeedWithConfigurationMax as well
  - AE-1628: Move Altitude ADH to helicopter specific
  - AE-1630: Fix undefined errors
  - CDS-207, CDS-254 & CDS-255: Derive APU Running from APU Fuel Flow or APU On when available

  Other Fixes:
  - Fix for derived parameter Altitude QNH masked values
  - Fix for new Np and propeller KPVs for slices containing 0 elements
  - Fixed index 0 is out of bound for axis 0 with size 0 error
  - mb2ft method now uses numpy power which works for integers as well as for arrays, as opposed to python's built-in pow function which doesn't work for arrays.
  - Changed hard landing KPVs to include Touch And Go
  - Alt qnh can operate fix
  - Modified InitialClimb phase to account for missing altitude data below 1000ft
  - Added a separate KPV for Load Factor at Touchdown
  - HeadingRate: handle Heading hz below 0.25
  - Using Altitude Radio instead of Altitude STD when this is masked
  - Changed AltitudeADH to integrate using the same frequncy as the Altitude Radio parameter

v0.37.2
-------
  - AE-1539: Polynomial terms added and test amended

v0.37.1
-------
  Resolved Tickets:
  - AE-49: Uncommented the code for V2Lookup derived parameter
  - AE-101: Added new KPV ILSGlideslope10SecBeforeEstablished
  - AE-250: Removed flaperon condition from Configuration multistate for A330, A340-300 and A340-500
  - AE-1041: Fix Rejected Takeoff triggering incorrectly
  - AE-1217: Changed parameter stacking method for engine vibrations
  - AE-1309: Unstable Approach-EPR and N1 patching
             Added AltitudeLastUnstableDuringLastApproachExcludingEngThrust KPV
             Added StableApproachExcludingEngTrust multi-state parameter
  - AE-1353: New KPV EngTorqueExceeding100Percent
  - AE-1502: 737 spoiler priority fixes
  - AE-1529: Changed Roll400To1000FtMax KPV to work for all flight phases
  - AE-1539: Engine derate and flex temp kp


v0.36.1
-------

  Resolved Tickets:
  - AE-215:  Airspeed relative to VLS events
  - AE-1260: Problem - Airspeed low 200 ft
  - AE-1267: SRR new event speed below minimum clean speed. https://polaris.flightdataservices.com/support/ticket/14425/
             Polaris Ticket 14425
  - AE-1445: Helicopter Flight Splitting
             Duplicate tickets AE-1312
  - AE-1446: Helicopter Rates Of Descent
  - AE-1475: Engine and Ground Spoiler parameter renaming
  - AE-1476: Ticket #15373: Missing flight data
             Polaris Ticket 15373
  - AE-1483: New Event INT029 Time to Engine Start
  - AE-1484: Undefined Errors #15418
             Polaris Ticket 15418
  - AE-1492: Visual displacement (from support ticket 15319)
             Polaris Ticket 15319
  - AE-1500: Make GFF000 event available to everyone
  - 15530: Boeing failed files 

  Fixes:
  - Liftoff computation now scans radio altimeter signal backwards to ensure noise during takeoff run is not misinterpreted.
  - Track computation corrected to apply correction to each landing and go-around segment separately.
  - ILS Frequency Checking - arithmetic errors when converting from kHz to MHz could cause this test to fail. 2 decimal places allows for nnn.n5 MHz spacing.
  - 3c2dfac SlopeToLanding: ignore masked altitude during approach
  - Fix for N1 During Taxi Out
  - N1 Hi Taxi - added condition to check if taxi_out.get_slices() array isn't empty
  - Avoid failing if whole array is masked
  - Runway touchdown algorithm improvements to cater for helipads
  - changed all limits from 35 to 15 for 737. Waiting for confirmation
  - Existing KPV Airspeed With Speedbrake Deployed Max corrected and test improved.
  - Stationary phase now removes nuisance sections below 5 seconds, and test added.
  - splitter: fix fallback if date and time parameters constant.
  - Fix: alt_agl needs to pass through LANDING_HEIGHT to count as a landing
  - FlapAtFirstMovementAfterEngineStart: Fix: indexing an emtpy list
  - GearUpInTransit: Fix: don't create slice if the start list is empty
  - TakeoffStart: fix: trying to index an empty list acc_start

  New KPV:
  - Airspeed Below Minimum Airspeed Duration
  - RoD Above 3000 Ft Max
  - Tail Clearance During Go Around Min

  other:
  - New function slices_overlap_merge created in preparation for improvements in ARINC NCD detection.


v0.35.1
-------

 - New KPVs:
    - Airspeed Above FL200 Max (AE-222)
    - Airspeed Above FL200 Min (AE-222)
    - Mach Above FL200 Max (AE-223)
    - Mach Above FL200 Max (AE-223)
    - Pitch Above FL200 Max (AE-220)
    - Pitch Above FL200 Min (AE-220)
    - Roll Above FL200 Max (AE-221)
    - Heading Variation 800 to 50 Ft (AE-216)
    - Altitude In Cruise Average (AE-217)
    - Pitch Touchdown To 60 Kts Airspeed Max (AE-25)
 - New KTIs:
    - IAN Final Approach Established Start
    - IAN Final Approach Established End
    - IAN Glidepath Established Start
    - IAN Glidepath Established End

 - Dependency Tree / Circular Dependency Issues from last release:
   - Remove Track Continous and Track True Continous. Use Track or Track True. Reducing Circular denpendency. (AE-1472)
   - Move Gear Poistion to preprocessing (AE-1472)
   - Reduce node complexity: (AE-1472)
     - Derive Latitude Prepared and Longitude Prepared in pre-processing if Latitude and Longitude recorded parameters are present.
     - Derive 'Gear Up' in pre-processing if recorded parameters 'Gear (*) Up' are available
     - Derive 'Gear Down' in pre-processing if recorded parameters 'Gear (*) Down' are available
     - Derive 'Gear Down In Transit' in pre-processing if recorded parameters 'Gear (*) Down In Transit' are available
     - Derive 'Gear Up In Transit' in pre-processing if recorded parameters 'Gear (*) Up In Transit' are available
     - Derive 'Gear In Transit' in pre-processing if recorded parameters 'Gear (*) In Transit' are available
   - 'Gear Up Selected': Make this node do the deriving and 'Gear Down Selected' simply inverts this parameter. (AE-1472)
   - Separate helicopter calculations to an overriding node. (AE-1472)
       - Some nodes, have completely different calculations depending on aircraft type, which seems to be affecting the dependency tree order
         due the extra complexity of more dependencies.
       - The helicopter calculations have been moved to a helicopter module which can override the node when processing helicopter flights.
         This is an initial stage.
   - Fixes: KPV 'Acceleration Normal Offset' not being created, causing no offset in 'Acceleration Normal Offset Removed' (AE-214)
   - Fixes: KPV 'Acceleration Lateral Offset' not being created, causing no offset in 'Acceleration Lateral Offset Removed' (AE-214)
   - Fixes: 'Magnetic Variation From Runway' being derived but too late to be used in deriving 'Heading True' (AE-1460)
   - Improvement: Simplify 'Heading True' by just using ‘Heading Continuous’ and ‘Magnetic Variation From Runway’. No optional dependencies. (AE-1460)
   - Improvement: 'Magnetic Variation From Runway' now fits the 'Magnetic Variation' profile to the Magnetic Variation of the takeoff and  (AE-1460)
                  landing runways instead of being just a linear line.

 - Updates:
    - Flap: Add Citation & VLJ families
    - KPV docstrings reviewed and updated (AE-162)
    - renamed AccelerationNormal20FtToFlare KPV to AccelerationNormal20FtTo5Ft (AE-1424)

 - Improvements:
    - PreflightCheck: do not split the range into multiple parameters (AE-132)
    - AccelerationNormalMinusLoadFactorThresholdAtTouchdown: Repair Roll
    - Gear On Ground: Added condition for Collective to be <15% for Columbia 234 (AE-224)
    - Ground track: remove small straight slices.
    - MasterWaningDuration: For AW139, only trigger when airborne. (AE-226)
    - CoordinatesSmoothed: Better exception handling.
    - SATMin: added condition for S92 to only work for RotorsTurning phase. Created unit test. (AE-1420)
    - GearUpInTransit: Use Fast phase instead of Airborne
    - Changed the threshold for pitch and roll parameters on ground and deck from 40% to 25% (AE-1368)
    - Some KPVs that relate only to aeroplane operations (e.g. deceleration on runway) made aeroplane specific to avoid calculation for helicopters.
    - For helicopters, trap for Initial Approach to ignore short hops above 500ft.
    - Approach phase for helicopters to be created only when beginning and end of approach phase have been identified.
    - Short periods showing gear on ground to be ignored - can arise from data dropouts in the cruise. (Helicopter specific).
    - AileronPreflightCheck: use Aileron (L) or (R) in preference to avoid averaged Flaperon
    - Aileron: upscale to 2x frequency to better match signals
    - Elevator combination for inboard and outboard sensors. For example, ERJ 170 & 190 types have this form of instrumentation.
    - Slope To Landing: Introduction of deviation from ISA temperatures.
    - Headwind: use non continuous parameters.
       - Changed Heading True to Heading in Headwind derived parameter
       - Continuous parameters no longer in use
       - Changes made to node.py so that  recorded parameter keeps lfl label
       - Modified Heading derived parameter to use Heading True.
       - Changed the way WindDirection derived parameter is calculated, now it blends two recorded parameters.
    - Changed Airborne phase for helicopter settings
    - phases: check all approaches for initial approach
    - split_segments: identify heli segments with Gear on Ground

 - Fixes:
    - splitter: fix fallback if date and time parameters constant.
    - ElevatorPreFlightCheck: added L and R sources, travel includes L and R (AE-132)
    - derived_parameters.Aileron: fix invalid offset
    - N1 During Taxi: Cut taxi out slice by 20 seconds in order to prevent false event triggers. (AE-93)
    - peak_curvature method in library.py
    - api: fix handling of nan
    - api: minor code tidying.
    - Correction to make ISA altitude correction operate in the right sense.
    - conf: fix engine propulsion for community example.
    - kpv: various fixes to ThrottleReductionToTouchdownDuration
       - Removed obsolete descriptions from docstrings.
       - 5 second delta was incorrectly calculated.
       - End of reduced scope was incorrect relative to landing start.
       - Removed redundant if-statement and ploting code.
    - TakeoffAccelerationStart: Don't create KTI if coreg returns idx larger than parameter.
    - attributes: fix handling of commercial flight type.
    - fixes to units
    - index_at_value: handle NaN arrays

v0.34.2
-------

Fixes:
 - Gear Up: Removes spikes that are causing a bad creation of the derived parameter Gear Down In Transit
 - Gear Up/Down In Transit: In transit state can only happen in airborne phase

v0.34.1
-------

KPVs Added:
 - Airspeed Minus Airspeed Selected Max
 - Eng Oil Press Low Redline Exceeded Duration
 - Eng Gas Temp Above Normal Max Limit During Takeoff 5 Min Rating Duration
 
Improvements:
 - Derived Gear Parameter
   - Gear Position
   - Gear Position multi-state to merge individual Gears
   - Gear Up/Down In Transit
   - Gear Up/Down In Transit handle noisy data at end of segment
   - Gear Up/Down
   - Use lookup tables for transition times for when only one gear indicator available
 - Node Dependency:
   - Added Pre processing function. Merge parameters before processing to simplify dependency
     order calculations by reducing circular dependencies
   - Dependency order calculation updated to enfore order of dependencies 
     order taken from order of parameters passed into derive method
     previously order was based on order of dictionary keys so could change
     each time it was run
   - Graph: avoid segfault by delaying layout.
 - Update _dist to FlightDataUtilities Geometry
 - Gear On Ground: detection improvements for Columbia 234 & 264
 - Speedbrake: Include G-VI into the derived parameter
 - SpeedbrakeSelected: Include G-VI into the derived parameter
 - Altitude Radio overflow tweak
 - Implemented A330/A340 flap configurations in relief based on Relief Engaged parameter 
   and Flap Lever position
 - Improvement to precise takeoff runway use two points use average distace between accel start/liftoff 
   and runway centreline improves detection for airports such as Bilbao

Fixes:
 - EngOilPressWarningDuration: Added unittest
 - Phase: Approaches (Heli) prevent overlapping phases
 - KPV: GroundspeedWithThrustReversersDeployedMin: EPR to be prioritized over N1
 - KPV: TouchdownToPitch2DegreesAbovePitchAt60KtsDuration: Fix negative duration
 - Track smoothing to correct for the landing runway and not the approach runway (except for go-around). 
   - New unittest TestPalmaDeMallorca
 - Use flightdatautilities.units module over hardcoded values
 - Empty slices raising

v0.33.3
-------
Improvements:
 - Dont raise AFRMismatch for helicopters as have multiple approach/landings

v0.33.2
-------
Issue with bumpversion. Use v0.33.3


v0.33.1
------- 

KPVs added 

 - TailRotorPedalWhileTaxiingABSMax
 - TailRotorPedalWhileTaxiingMin
 - DistanceTravelledDuringTurnback
 - DistanceTravelledFollowingDiversion
 - TouchdownToPitch2DegreesAbovePitchAt60KtsDuration

Improvements:

- Derotation slow KPV amended to handle less than 2 degree pitch variaiton on ground. Also aeroplane only kpv
- Additional filters to get_nearest_airport. If lat/lon not precise use heading and ils freq to help detect airport. Also raise error if precise and data does not match AFR
- Handle aligning of string Paramerters also return same array type as is passed into align_args
- Approaches landing heading improvement for ATR aircraft. 
- python 2 & 3 compat: change from future to six
- multistate.GearOnGround: align vertical speed if required
- flight_phase.Climb: skip brief climbs
  
Fix:
 - Airborne: fix gear on ground check for masked values
 - A330 speedbrake parameters
 - Trap for zero length slices in Heading Variation 300 To 50 Ft 
 - Removal of ground track correction for go-arounds with imprecise navigation and no ILS reference.
 - AccelerationNormalMinusLoadFactorThresholdAtTouchdown: Fix NoneType when getting Roll value.  
 - AltitudeVisualizationWithoutGroundOffset: use max alt when there's no cruise phase. 
 - TrackDeviationFromRunway prevent overlapping with previous approach 

Docstring updates:
 - stable approach
 - altitude parameters revisited for completeness
 

v0.32.2
-------

  - Fix:
   - KTI: Revert Autoland

v0.32.1
-------

 - Added:
  - KPV: Rotor Speed At 6 Percent Collective During Eng Start
  - KTI: Last Eng Start Before Liftoff
  - Derived: Rotor Brake Engaged
 
 - Improvements:
  - Make 'Mach' available to all aircraft types. Needed to derive SAT.
  - FuelQty: better handling of not enough valid data
  - Groundspeed Signed parameter extended
  - python 2 & 3 compatibility
  - Plot flight
  - Ground track algorithms
  - Aileron algorithms
  - Stable approach
  
 - Fixes:
  - Better handling of invalid lat/lon in api request
  - Autoland use existance of AP 3 data to determine the no. of AP systems
  - MagneticVariation during short RTO segments.
  - Phase: Takeoff: Fix takeoff end for short flights
  - SidestickAngle params: repair small masks to correct invalid dual imput
  - Amendment to Approaches
  - Approaches from offset ILS localizers cannot be aligned with the runway
  - Fix missing/invalid altitude data raising exceptions
  - Rate Touchdown To 60 Kts Airspeed Max handle exception if Touchdown is empty
  - AirspeedMinusV2: prevent overlap with Airspeed Minux Vref/Vapp during touch and go 
  - Split Segments
  - SpeedbrakeHandle: add additional sources 
  - Touchdown: prevent carrying indexes over to subsequent landings 
  - SidestickAngle params: repair small masks to correct invalid dual imput 
  - Add units to Pitch/Roll Smooted derived parameters
  - KPV: AirspeedSelectedAtLiftoff
  - Derived: AirspeedMinusV2

 - Renamed 
  - Derived: 'Altitude QNH' to 'Altitude Visualization With Ground Offset' and 
          'Altitude Visualization Without Ground Offset'
  - Derived: 'Altitude QNH Calculated' to 'Altitude QNH'

v0.31.3
-------

 - Improvement:
  - KPV: Acceleration Normal Minus Load Factor Threshold At Touchdown

v0.31.2
-------

 - Fix:
   - Derived: Pitch/Roll Smoothed handle 5hz parameters

v0.31.1
-------

 - Improvements:
   - Approaches:
     - Revised to permit localizer established to occur below 1000ft AAL
     - Runway change now check that the two runways are parallel
     - Fix for negative localiser established phases
   - Onshore/Offshore: (Helicopter only) Currently in profiles due to libary requrements
     - Renamed:
       - KPV: Airspeed2NMToTouchdown --> Airspeed2NMToOffshoreTouchdown
       - KPV: AirspeedAt200Ft --> AirspeedAt200FtDuringOnshoreApproach
       - KPV: Groundspeed20SecToTouchdownMax --> Groundspeed20SecToOffshoreTouchdownMax
       - KPV: Groundspeed0_8NMToTouchdown --> Groundspeed0_8NMToOffshoreTouchdown
       - KPV: HeadingDeviation1_5NMTo1_0NMFromTouchdownMax --> HeadingVariation1_5NMTo1_0NMFromOffshoreTouchdownMax
     - Added:
       - KPV: HoverHeightDuringOnshoreTakeoffMax
       - KPV: HoverHeightDuringOffshoreTakeoffMax
       - KTI: Onshore/Offshore Touchdown
     - Removed:
       - KPV: HoverHeightMax
   - Engine (Helicopter) OEI/AEO, renames and improvements
     - Renamed:
       - Multistate: Eng1OEI --> Eng1OneEngineInoperative
       - Multistate: Eng2OEI --> Eng2OneEngineInoperative
       - Multistate: Eng_OEI --> OneEngineInoperative
       - Multistate: Eng_AEO --> AllEnginesOperative
     - Added:
       - KPV: EngTorqueWithOneEngineInoperativeMax
       - KPV: EngTorqueLimitExceedanceWithOneEngineInoperativeDuration
       - KPV: EngTorqueAbove100KtsMax
     - Removed:
       - KPV: EngTorqueDuringMaximumContinuousPowerAirspeedBelow100KtsMax
       - KPV: EngTorqueDuringMaximumContinuousPowerAirspeedAbove100KtsMax
   - Roll Cycle:
     - Renamed:
       - KPV: RollCyclesDuringFinalApproach --> RollCyclesExceeding5DegDuringFinalApproach
       - KPV: RollCyclesDuringInitialClimb --> RollCyclesExceeding5DegDuringInitialClimb
     - Added:
       - KPV: RollCyclesExceeding15DegDuringFinalApproach
       - KPV: RollCyclesExceeding15DegDuringInitialClimb
   - Cleanup:
     - comparison to None should use is instead of ==
     - redundant comparisons to boolean in if statement
     - simplify array comparisons to boolean

 - Fix:
   - Derived: AAL Helicopter handle multiple GoG section in dip
   - KPV: HeadingVariationAbove80Kts: handle rapid airspeed 
   - KPV: Control Column/Wheel Force Max KPV use max_abs_value
   - KPV: Helicopter Pitch/Roll on ground/deck added <40% collective condition where missing
   - KPV: AT Engaged AP disengaged use custom 300fpm climb criteria
   - KTI: Touchdown: fix Saab 2000 attr comparison
   - Multidtate: APVertMode: added Vertical Speed Engaged optional dependancy 
   - Multistate: SpeedbrakeSelected: B777 correct armed when between 0 and 1
   - Multistate APEngaged: keep or'd mask
   - Node: Multistate: Pass state attribute to aligned param during alignment 
   - Phase: ApproachAndLanding: exclude small alt dips
   - Phase: Landing: avoid indexing past end of data
   - Phase: TransitionHoverToFlight: decreaded upper rotor tansition speed to allow for slower climbs
   - Split: Only write Converter submasks

 - Add:
   - Derived: Altitude QNH Calculated
   - Derived: Pitch Smoothed
   - Derived: Roll Smoothed
   - KPV: Acceleration Normal Minus Load Factor Threshold At Touchdown
   - KPV: Airspeed 5000 To 8000 Ft Max
   - KPV: Altitude At Last Flap Selection Before Touchdown
   - KPV: Cruise Speed Low
   - KPV: Degraded Performance Caution
   - KPV: Airspeed Increase Alert
   - KPV: Throttle Lever Variation Above 80 Kts To Takeoff
   - Library: mb2ft: convert millibars into feet

 - Remove:
   - KPV: Roll At Low Altitude (duplicate)

v0.30.2
-------

 - FIX: Speedbrakes for Citation


v0.30.1
-------

 - Approach/ILS Improvements
   - ILS Localizer signal amendment to allow for 2-source signals to select larger when discrepancy is significant.
   - accommodate offset ILS localizers
   - detect runway changes
   - better support runways without ILS equipment
   - Coordinates Smoothed revised to provide track correction for go-arounds as well as the final landing.
   - Track calculation updated to allow for runway change case
   - Various adjustments to Localiser and Glideslope Established criteria

 - Add:
   - KTI: DistanceToTouchdown
   - KPV: HeightAtOffsetILSTurn
   - KPV: HeightAtRunwayChange
   - KPV: ATEngagedAPDisengagedOutsideClimbDuration
   - KPV: Drift At Touchdown
   - KPV: PitchTouchdownTo60KtsAirspeedMax --> PitchRateTouchdownTo60KtsAirspeedMax
   - KPV: AltitudeDuringLevelFlightMin --> AltitudeDuringCruiseMin

 - Fix:
   - Derived: ILS Localizer fix frequency as not guaranteed to be 1hz
   - Derived: AGL for flight phase fix to stop jumping from 0 to max value
   - Derived: DistanceToLanding Fix sliceing
   - Derived: DistanceToLanding handle masked values at touchdown
   - Derived:  AirspeedSelectedForApproach Fix - Airspeed Selected being reset after landing
      on low frequency parameters was affecting the values in the approach.
   - Derived: AltAAL Fix for heli with no rad alt
   - KTI: Touchdown: only use alt_rad start if 5 ft is found
   - KPV: Altitude Before Level Flight When Climbing/Descending use STD smoothed instead of AAL
   - KPV: HeadingVariationAbove80Kts handle hdg mask
   - Phase: Takeoff: ignore early alt spikes

 - Improvement:
   - All: Fix some numpy deprecation warnings
   - Attribute: Landing Attributes: use those detected in Approach Information 
   - Derived: AGL for flight phase 10ft hysteresis added  to ensure level flight at low altitudes does not trigger multiple KPVs.
   - Derived: MagneticVariation removed helicopter excemption
   - Derived: Groundspeed Signed Pushback extended to allow for early engine start cycle during pushback.
   - Derived: Groundspeed Signed fix for flights where engines are running throughout
   - Derived: AltitudeRadio A318 added to overflow correction
   - Derived: Speedbrake added Citation
   - KTI: Eng Stop, detect if spooling down at end of data
   - KPV: DistanceToTouchdown KPVs use new DistanceToTouchdown KTIs
   - library: straighten_longitude ignore spikes
   - library: straighten_overflows fix spike check
   - library: last_valid_sample optionally remove small slices
   - library: ground_track_precise Iteration limit extended for ground track calculation
   - library: Track linking correction to handle rare cases where the reference track is masked at the point where the joining takes place.
   - Splitting: added pre_file_kwargs 


v0.29.3
-------

   - Speedbrake logic for A350

v0.29.2
-------

 - Add:
   - Derived: AltitudeAGLForFlightPhases
   - KPV: Airspeed2NMToTouchdown
   - KPV: AirspeedAt200Ft
   - KPV: AirspeedAtAPUpperModesEngaged
   - KPV: APEngagedSelection
   - KPV: AltitudeDuringCruiseMin
   - KPV: EngTorqueDuringMaximumContinuousPowerAirspeedBelow100KtsMax
   - KPV: EngTorqueDuringMaximumContinuousPowerAirspeedAbove100KtsMax
   - KPV: Groundspeed0.8NMToTouchdown
   - KPV: Groundspeed20SecToTouchdownMax
   - KPV: GroundspeedMax --> GroundspeedWithGearOnGroundMax
   - KPV: HeadingDeviation1.5NMTo1.0NMFromTouchdownMax
   - KPV: PitchBelow5FtMax
   - KPV: Pitch5To10FtMax
   - KPV: Pitch10To5FtMax
   - KPV: PitchTowndownTo60KtsAirspeedMax
   - KPV: RotorSpeed36To49Duration
   - KPV: RotorSpeed56To67Duration
   - KPV: RotorSpeedDuringAutorotationMin
   - KPV: VerticalSpeedAt500Ft
   - KPV: VerticalSpeedAt300Ft
 - Fix:
   - KTI: AltitudeBeforeLevelOff use Altitude Smoothed
   - Splitting: fallback dt in future during splitting
   - Splitting: get_dt_arrays throwing away valid hour of 0


v0.29.1
-------

 - Add:
   - Derived: MGBOilTemp
   - Derived: MGBOilPress
   - Derived: FuelQtyAux
   - KPV: PitchBelow1000FtMax/Min
   - KPV: RollAbove300FtMax
   - KPV: RollBelow300FtMax
   - KPV: TailRotorPedalWhileTaxiingMax
   - KPV: AccelerationLongitudinalWhileAirborneMax
   - KPV: AirspeedDuringAutorotationMax/Min
   - KPV: AirspeedAbove500FtMin
   - KPV: CruiseGuideIndicatorMax
   - KPV: GroundspeedBelow100FtMax
   - KPV: MGBOilTempMax
   - KPV: MGBOilPressMax/Min
   - KPV: MGBOilPressLowDuration
   - KPV: CGBOilTempMax
   - KPV: CGBOilPressMax/Min
   - KPV: StallFaultCautionDuration
   - KPV: AltitudeWithSpeedbrakeDeployedDuringFinalApproachMin
   - KPV: SATRateOfChangeMax
   - KPV: ROC/ROD At Height before level off
   - KPV: RollOnDeckMax
   - KPV: Pitch On Ground and On Deck, Max and Min
   - KPV: TrainingModeDuration
   - KPV: HoverHeightMax
   - KPV: EngTorque7FtToTouchdownMax
   - KPV: RollWithAFCSDisengagedMax
   - Multistate: Helicopters OEI/AEO
   - Phase: On Deck
 - Improvement:
   - Straighten parameters before alignment
   - Use Float values for frequency and offset by default
   - Derived: Altitude AAL for helicopters without rad alt
   - Derived: Altitude AGL handle missing Altitude Radio
   - Derived: GearOnGround for helicopters with no GoG params
   - Derived: Groundspeed can_operate requires Precise Positioning for Helicopter.
   - Derived: Slat Angle: remove single spikes from Slat Angle Recoreded if available
   - Derived: AltitudeAAL to ignore "ground" higher than most mountains
   - KPV: SATMax: include fixed wing.
   - KPV: Acceleration Longitudinal While Airborne Max: include fixed wing.
   - KPV: TCAS RA event requires a minimum of two samples to trigger
   - KPV: Heading variation on runway not applicable for helicopters
   - Library: Change overflow correction to remove gaps based on time
   - Multistate: Speedbrake Deployed remove single samples
   - Multistate: Speedbrake Selected: added A310, A350, CRJ100, CRJ200
   - Phase: Climb/Descent Altitude Radio Offset Removed used
   - Split: Helicopter: handle missing GOG
 - Fix:
   - Wholly masked segments ignored in ClimbCruiseDescent flight phase.
   - Latitude at liftoff fix for S76
   - split_hdf_to_segments: ignore brief aspd spikes 
   - coreg:
     - avoid python float rounding
     - handle negative sqrt along with ValueError
     - handle infinite correlation result
 - Removed:
   - KPV: Stall Warning Activated Duration

v0.28.7
-------

 - improvements in splitter: use upload datetime for date validation, not the
   fallback datetime

v0.28.6
-------

 - MD-11 Speedbrake Selected

v0.28.5
-------

 - Jetstream Np prohibitied range changed
 - RotorsRunning handle small masked sections of data

v0.28.4
-------

 - Restored:
   - KPV: EnterTransitionFlightToHover
   - KPV: ExitTransitionFlightToHover
   - KPV: ExitTransitionHoverToFlight

 - Improvement:
   - Derived: Groundspeed: only use lat/lon if no recorded groundspeed available
   - KPV: HeadingDuringLanding: Improve can_operate for helicopters
   - KPV: MCP KPVs:  use MCP phase in MCP KPVs
   - KPV: Helicopter height bands change from descending to descent
   - KTI: Gear Up Selection for Helicopters
   - KTI: EngStop: use EngStart to ensure we have an eng stop after eng start.
   - KTI: Avoid alignment of the Longitude parameter
   - KTI: Distance From Airport: repair mask

 - Fix:
   - Derived: AltitudeRadio: adjustments for Airbus


v0.28.1
-------

 - Improvements for handling helicopter specific code

Fix:
 - GreatCircleDistance: handle no coordinates
 - Rejected Takeoff fixes:
   - Airborne not required for mobile
   - Final Approach needs to be able to have been airborne

Improvement:
 - Tailwind at takeoff reverted to airspeed true
 - API refactoring
 - Touchdown: increase height check for gear on ground


v0.27.1
-------

 - Add:
   - KPV: Tailwind During Takeoff Max
 - Improvement:
   - Derived: Approach Range now accommodates helicopter operations
   - SplitSegment: Helicopter
      - Alternative sources of rotor speed information catered for in get_speed_parameter
      - blend_parameters takes a list of params
      - result is masked array not parameter object
   - Library: align: allow frequency multiple of five
   - Utils: open_node_container: support [%] in names
 - Fix:
   - Derived: lat/lon smoothed
      - Attributes nonzero look at attributes value
      - Lat/Lon smoothed can operate Approach Range is required for Imprecise non ILS approaches
   - KTI: Distance To Touchdown now resets after each touchdown
   - Library: slices_remove_small_gaps: fix unordered
   - Library: slices_remove_overlaps: fix complex slices
   - Phase: Landing following short go-around
   - Phase: Cruise: handle very brief cruise
   - Phase: TaxiIn: allow Mobile or Landing to stop first


v0.26.5
-------
 - Fixes:
   - Alternative sources of rotor speed information catered for in get_speed_parameter.


v0.26.4
------
 - Fixes:
    - flight_phases.Cruise: handle very brief cruise
    - TaxiIn: allow Mobile or Landing to stop first


v0.26.3
-------

 - Improvements:
   - Alignment supports frequencies which are multiples of 5.
   - EngTorqueOverThreshold will create fewer Key Point Values for Torque parameters fluctuating over a threshold.
 - Fixes:
   - Fix for slices_remove_small_gaps when input slice list is unordered.
   - Fix for slices_remove_overlaps when input slices are very fragmented.


v0.26.2
-------

 - Fixes:
   - Derived: Lat/Lon smoothed: Fixed Aircraft type identification.


v0.26.1
-------

 - Rudder Pedal Naming convention changes
 - Aircraft speciffic Node can_operate updated to exclude Helicopter

 - Added:
   - Attribute: Eng (*) Serial Number
   - KPV: Great Circle Distance
   - KPV: Pitch 500-100 Max
   - KPV: Pitch 500-100 Min
   - KPV: Pitch 100-20 Max
   - KPV: Pitch 100-20 Min
   - KPV: Pitch 20-Tdwn Max
   - KPV: Pitch 20-Tdwn Min
   - KPV: Airspeed 500-100 Max
   - KPV: Airspeed 500-100 Min
   - KPV: Airspeed 100-20 Max
   - KPV: Airspeed 100-20 Min
   - KPV: Airspeed 20-Tdwn Max
   - KPV: Groundspeed 20-Tdwn Max
   - KPV: RoD 500-100 Max
   - KPV: RoD 100-20 Max
   - KPV: RoD 20-Tdwn Max

 - Improvements:
   - Attribute: Improved logging detail
   - Derived:  Helicopter flight path smoothing now does not use runway approach characteristics at all
   - KPV: Preflight Checks use model info lookup
   - KTI: DistanceFromLocationMixin: Avoid interpolation issues during alignment
   - KTI: DistanceFromLocationMixin: Optimisations
   - KTI: x to touchdown: Fixes for short helicpoter hops
   - Phase: ApproachAndLanding: Handle touchdown and collective down immediately
   - Splitting:  Alternative option for helicopters with separate (L) & (R) Gear On Ground signals
   - Utils: open_node_container: support dash in nodes

 - Fixes:
   - Derived: AltitudeAGL: Altimeter Radio mask repair stage added
   - Phase: Landing: Helicopter approach correction
   - KPV: AirspeedSelectedAtLiftoff: Trap for liftoff outside adjusted phase
   - KTI: Transition Flight to Hover: Corrected index
   - Multistate: Flap Inc Trans: Maintain states not values



v0.25.2
-------

 - Fixes:
   - KPV: Jetstream 41 Np on ground kpv can_operate and parameter naming

v0.25.1
-------

 - Merge helicopter profile into main source code
 - Replace httplib2 with requests
 - Updates to support latest versions of networkx
 - Engine KPV/Phases:
   - Updated Engine 5 minute rating for Prop aircraft to look for end of takeoff
   - New phase for MCP
   - Added Takeoff Rating Duration(KPV)
   - added eng * over threshold duration kpvs
   - Added Eng param 5 sec max during rating kpvs
 - Heading Deviation During Takeoff:
   - reworked following experience with original algorithm and further advice from UK CAA.
   - renamed HeadingDeviationFromRunwayAbove80KtsAirspeedDuringTakeoff -> HeadingVariationAbove80ktsAirspeedDuringTakeoff
   - Handle nose gear not working correctly
   - fallback to mag heading if true not available
   - Handle the case when pitch changes before 80kts
 - Splitting:
   - Airborne: do not break early if no alt change
   - Transient dips below 80kts not relevant to flight splitting, so filtered out
   - Revision to _get_normalised_split_params as we should normalise each parameter separately
   - ignore inconsistent airspeed

 - Added:
   - Derived: Collective
   - Derived: Slope angle to aiming point
   - Derived: Groundspeed Signed (for negative groundspeeds when being pushed back)
   - Multistate: Eng Bleed Open
   - KPV: Heights at distances on approach.
   - KPV: Boeing 787 fuel imbalance
   - KPV: Jetstream 41 Test for duration of propellor operation between 72% and 80% Np.
   - KPV: ElevatorPreflightCheck
   - KPV: AileronPreflightCheck
   - KPV: RudderPreflightCheck
   - KPV: FlightControlPreflightCheck
   - Libary: slices_split
   - Libary: slices_remove_overlaps
 - Removed:
   - KPV: SpeedbrakeDeployedWithConfDuration
   - KPV: AccelerationLateral5secs - B787 frames only
   - Libary: Moved Library.is_day() to Flight Data Utilities
 - Improvements:
   - Derived: Vert Spd Inertial - modified to not enforce zero rates of descent outside climbs and descents (Helicopters)
   - KTI: Touchdown: peroid of interest start at 5ft before touchdown if Alt Rad
   - KTI: Touchdown: touchdown point is earliest of calculated and GOG index
   - KPV: Hdg Var Tdown +4Sec To 60Kts Airspeed - now uses Airspeed True
   - KPV: Hdg Var Tdown +4Sec To 60Kts Airspeed - allow for different timing offset in touchdown KTI and heading array
   - Libary: Haversine formula - adapt to support numpy arrays
   - Multi: Speedbrake Deployed requires left and right spoiler deployed to indicate speedbrake
   - Multi: AP Vertiacl Mode added additional long mode states
   - Node: multistate parameters supported in create_kpvs_at_ktis
   - Phase: airborne phase for helicopters
   - Utils: list_parameters - Exclude AFR attrs
 - Fixes:
   - Attribute: DestinationAirport - fix '0000' airport code
   - Attribute: Runway identification for aircraft with recorded latitude, longitude, ILS
                glideslope and ILS localizer but N|OT ILS frequency amended to use position data.
   - Derived: removing spikes in the tailwind values at touchdown
   - KPV: Rate of Descent Below 80 Kts revised to provide correct indexes
   - KPV: GW Conditional @ tdown - ROD are negative values
   - KPV: TCAS moved Preventive from TA to RA
   - KPV: DecelerationFromTouchdownToStopOnRunway - Trap for invalid groundspeed
   - KPV: Roll Rate Max corrected to report peaks only once
   - KPV: Suppression of roll rates below 5deg/sec as too small to be significant (and just results in huge number of KPVs)
   - KPV: heading var > 80kts - index as is relative to 80kts not start of takeoff
   - KPV: heading var > 80kts - changed datum to use median from start of valid airspeed to 80kts to
          remove invalids where aircraft stationary off centre before correcting before 80kts airspeed
   - Multi: Combine TCAS RA 1&2 into one multistate
   - Phase: Mobile - Support mobile from start of data
   - Phase: Taxiing - can_operate Rejected Takeoff required
   - Phase: TaxiOut - handle no taxi (data starts on runway)
   - Phase: Bottom of Descent - case of None end of section handled
   - Phase: Landing: use mobile end instead of the remainder of the array in cases where
            the aircraft doesn't turn off the runway before engine stop.
   - Phase: Taxi In: fix creating invalid slice when engines start late (engine-less taxi?)
   - Phase: Taxi Out: fix crashing invalid slice when engines stop early (engine-less taxi?)

Plus various other small fixes and test improvements.

v0.24.5
-------
 - Fixes:
  - Vertical Speed Inertial Fix for Helicopters

v0.24.4
-------
 - KTI: DistanceFromAirport
 - Fix: Longitude was smoothed unnecessarily on the -180 / +180 roll over which
   caused vis artifacts

v0.24.3
-------
 - KPVs: Split taxi KPVs into taxi in/out
 - Fix: Failing version test

v0.24.2
-------
 - Fix: Regression: Correctly detect Mobile phase at the begining of the data


v0.24.1
-------
 - Make 100% of tests pass
 - Support for helicopters


v0.23.2
-------
 - Fix: Correctly detect Mobile phase at the begining of the data


v0.23.1
-------
 - New:
   - KPV: GrossWeightConditionalAtTouchdown (Airbus)
   - KPV: RudderPedalMin (temporary)
   - KPV: RudderPedalMax (temporary)
   - Phase: IANFinalApproachCourseEstablished used by IAN KPVs
   - Phase: IANGlidepathEstablished used by IAN KPVs
 - Improvements:
   - AirspeedSelectedForApproaches compensates for large offsets.
   - APUStart and APUStop derive at the edges of the data.
   - Derive Track True Continous from Track True with Drift being optional.
   - EngGasTempDuringEngStart handles engines already running at start of data.
   - Fuel Flow parameters are used for splitting flights.
   - Handle Takeoff at start of data during Taxi Out.
   - most_points_cost algorithm to allows for differing numbers of data samples in the array.
   - SpeedbrakeDeployed supports Spoiler renaming.
 - Fixes:
   - coreg no longer overflows due to np.int32.
   - Heading during phase KPVs no longer output 360 for very small negative numbers.
   - Mobile: Ground Only flights with no Groundspeed will not raise Exception.


v0.22.2
-------
 - repair mask of lat and lon results in large speed increase for poor quality signals


v0.22.1
-------

 - New:
   - Multistate: Smoke Warning
   - KPV: Smoke Warning Duration
   - KPV: Roll Cycles During Initial Climb
   - KPV: Thrust Reversers Deployed During Flight Duration
   - KPV: Groundspeed At Liftoff
   - Phase: Stationary
   - KTI: Movement Start
   - KTI: Movement Stop
   - KTI: APU Start
   - KTI: APU Stop
 - Improvements:
   - Gear up selection improved accuracy
   - Align to Takeoff and Go Around param for improved KPV accuracy
   - Remove Gear recycling from Altitude at gear up/down selection
   - Accel Norm Takeoff changed to liftoff to 35ft
   - Overflow correction: use maximum change of value instead of ptp
   - Altitude Radio: use dynamic overflow values
   - Use Stationary phase to detect Movement Start / Stop
   - calculate_timebase: Small speed increase
   - Added node Cacheing
   - SAT: derive from Sat (1/2/3)
   - ThrustReversers: derive even if a single Thrust Reversers Deployed is available
   - Mobile phase: use Groundspeed to expand the phase
   - Reduced period of level flight allowed during level bust
 - Fixes:
   - find_toc_tod: handle masked data at mid point of descent/climb


v0.21.8
-------
 - Speedbrake Selected update for A330

v0.21.7
-------
 - Speedbrake update for A330: use spoilers 2 and 8

v0.21.6
-------
 - Updated heading_diff to operate on arrays
 - Fix: scan_ils handle heading moving between 360 and 0

v0.21.5
-------
 - bumped straighten longitude threshold

v0.21.4
-------
 - HDF duration fixes

v0.21.3
-------

 - Boeing 747:
   - Added additional Vib parameters
   - Added Slat discrete multistates parameters
   - Derive Slat Angle from Slat Discretes
 - Airbus A380:
   - Added 5th left and right fuel tanks
 - New:
   - Derived Parameter: Slope Angle To Landing
 - Improvements
   - Remove runway elevations from Altitude QNH.
   - TAT: Fixed broken can_operate
   - StableApproach: use airspeed relative as low limit
   - Airspeed At Flap Extension amended to use synthetic flap extension
   - FuelQtyWingDifferenceMax: restricted to airborne phases
   - Level Bust: check if index is within period of level flight
   - Level Bust: reinstated test to prevent short hop flights being detected as Level bust
   - TOGA KPV's: Measure at known state instead of interpolated transition

v0.21.2
-------

 - Fixed
   - library.including_transition: identify angles


v0.21.1
-------

 - Added
   - machsat2tat() function to allow reverse computation of adiabatic
     temperature rise.
   - new derived parameter "SAT International Standard Atmosphere" to make it
     clear that this is not a measured air temperature, but the SAT for ISA
     conditions only
   - FirstEngFuelFlowStart / LastEngFuelFlowStop KTIs
   - EngRunning parameters added for each engine independently
   - EngRunningDuration KPVs added
   - AirspeedWithFlapIncludingTransition20AndSlatFullyExtendedMax KPV
   - TakeoffStart KTI
   - Distance Flown Derived Paramete
   - ThrustReversersEffective multistate
 - Fixed
   - AltitudeOvershootAtLevelBust KPV: fix duplicates
   - Altutude During Climbing: merge phases to detect altitude changes
   - Fix for calculate timebase to account for flights taking off just before
     midnight
   - Fix some incorrect and missing units
 - Improved
   - FlapWithSpeedbrakeDeployedMax uses Including Trans
   - LandingGearToFlapDuration handles edge cases
   - GearDownToLandingFlapConfigurationD: use v* table
   - improved node reprocessing with process_flight()
   - Use Climb and Descent phases for Altitude Climbing / Descending KTIs
   - process_flight: Added reprocess kwarg
   - process_flight: Added -initial option
   - Split HDF to Segments fallback_dt can now be relative to start or end of
     data
   - Added Airborne dependency to Takeof
   - Remove dependency for Airspeed from Grounded
   - ILS established improvements
   - Heading during landing


v0.20.2
-------

 - Fixed
   - DistCentreLine where groundspeed doesn't register below 60kts
 - Improved
   - StableApproach: tweaked stability criteria


v0.20.1
-------

 - Fixed
   - Added missing Eng Hotel Mode test data
   - Change of elevation test to avoid problems with lack of airfield identification.
   - Don't detect GROUND_ONLY for slow segments with no engine parameters
   - Fast duration calculation in split segments
   - ILS Established no longer throws away phases where starts are established
   - Prevent Airspeed FFP raising error for fully masked airspeed (GROUND_ONLY)
   - plot_parameter actually uses show kwarg
 - Improved
   - API changes to allow passing of segment type (GROUND_ONLY)
   - Acceleration Longitudinal KPVs changed to use offset removed
   - Added including_transition function for Flap Including Transition
   - Added pre_flight_kwargs as kwarg to process_flight to allow customisation of PRE_FLIGHT_ANALYSIS hook
   - Airspeed Minus Airspeed Selected For 3s uses an upsampled Airspeed Selected in case of a low sample rate
   - Altitude Tail reworked following known tail scrape cases
   - Climb Acceleration Start smooths noisy Eng Np signal
   - Detection of handover between pilots
   - EngTorquePercent65KtsTo35FtMin handles no takeoffs being detected (GROUND_ONLY)
   - Fuel Qty naming convention updated and Fuel Qty (C) added
   - Identification of Ground Only Rejected Takeoffs (GROUND_ONLY)
   - Merging of two-source flap data to cater for aircraft with mismatched left and right flap sensors
   - Segment type detection with fully masked airspeed
   - Threshold change to cater for low rate of flap movement on first stage of flap selection (737NG applies)
   - ThrustAsymmetryWithThrustReversersDeployedMax amended to suppress transients.
   - Transition altitude from Altitude AAL is now a setting
   - Updated limits within StableApproach
   - Vibration derived parameters and KPVs include additional dependencies
   - api_handler: Use form content type in requests
   - ignore_errors option added to ProcessFlight to continue processing if exceptions are raised within nodes
   - library.scan_ils: Fallback for invalid ils signal
   - process_flight returns dictionaries of nodes rather than lists of instances for matching instances to nodes
 - Added
   - Dual Input By Capt/FO Max KPVs
   - Eng Gas Temp Above Normal Max Limit Duration KPVs
   - Lateral distances on runway at Touchdown
   - PitchRate35ToClimbAccelerationStartMax KPV
   - Straighten algorithm suited for Longitude
   - json_tools module unit tests


v0.19.1
-------

 - Fixed
   - "Index at value or level off" needs to pass frequency to "Find level off"
     as this is slope dependent.
   - Climb Acceleration Start - trap for cases where the aircraft does not
     reach a normal acceleration altitude.
   - fix to AirspeedMinusV2At35FtDuringTakeoff to use interpolated value
     instead of last recorded value
   - Trap for null slices in find_nearest_slice
   - Stick Shaker and Pusher amended to OR recorded parameters instead of
     merging
   - ApproachAndLanding: remove ugly frame hack
   - Trap for error condition where both arguments are null in approach for
     'LANDING' case.
   - Trap for null list in slices_and_not
   - flight_phase: ApproachAndLanding 146-301 noise fix
   - find_low_alts: fix for level_flight during noise
   - Flap Angle offset should not be changed unless really necessary.
 - Improved
   - Change to Altitude Radio offset removed to only adjust positive offsets
   - change to Rad Alt offset removed to try and cater for increases in rad alt
     during acceleration
   - Radio Alt offset removed retain origional mask following medfilt
   - SlicesRemoveSmallSlices rearranged to return null cases quickly - test
     cases extended.
   - find_toc_tod amended to handle None arguments to _slice
   - Find Top of Climb & Descent amended to retain best of 4-part algorithm but
     remove confusing duplication of Bottom of Descent code.
   - Top of Climb / Top of Descent expanded to provide bottoms of climb and
     descent using similar algorithms. Unsatisfactory, but included as an
     interim step. Also, find_level_off included to avoid problems of reverse
     slicing.
   - Bottom of Descent simplified to match the Top of Descent in using Cruise
     Climb Descent phases, hence ensuring matched pairs of KPVs.
   - Combined Descent replaced by Descent
   - Frequency parameter passed out of flight phase calculations into
     find_low_alts.
   - Initial Climb phase amended to cater for climbs that do not reach 1000ft.
     Also, Initial Climb flight phase test added and helper build_kti added.
   - Mobile phase made solely dependent upon heading rate to avoid problems
     with groundspeed signals on stand.
   - EngOilPressFor20SecDuringCruiseMax is now for 60 seconds
 - Added
   - Roll At Low Altitude KPV added.
   - added AirspeedWithFlapIncludingTransition20AndSlatFullyExtendedMax KPV
   - Heading Change KPV added.
   - Descent flight phase added, with test case.
   - Stall Warning multistate parameter added for A340-300 and E505 types,
     which both carry dual systems.


v0.18.2
-------

 - Fixed
   - Flap Angle offset should not be changed unless really necessary
   - EngOilPressFor20SecDuringCruiseMax is now for 60 seconds


v0.18.1
-------

 - Fixed
   - Touchdown will no longer trigger braking if the aircraft is accelerating forwards
   - Windows temporary file paths
 - Improved
   - Approaches with too little valid glideslope data revert to "visual" approach estimation
   - blend_parameters library function expanded to provide both linear and cubic interpolation
   - calculate_surface_angle library function simplified to not apply a guassian filter and to always upscale the parameter frequency
   - Changes to Altitude Radio Offset Removed from masking go-arounds
   - Changed Altitude AAL to use Alt Radio Offset Removed
   - Changed ascending Altitude band KPVs to use Combined Climb
   - Changed descending Altitude KPVs between 3000 and 1000 Ft to use slices_from_to as Approach excluded level flight
   - Flap Angle interleaves each of the signals and interpolates the resulting higher frequency resulting parameter - much more accurate than interpolating values before interleaving
   - G550 Speedbrake Selected Armed state from Speedbrake Armed parameter
   - Gear Up uses in transit for G-IV
   - second_window applies correct 2 / frequency check to support more use cases
   - slices_from_to function in library accepts threshold keyword argument to avoid triggering due to noise
   - Switched to Flap instead of Flap Including Transition for Landing Gear Out of Sequence Key Point Values as Including Transition does not model the lever during flap setting decreases
   - Touchdown refinements to cater for more difficult aircraft
   - Touchdown KTI now uses third detected point and includes extra braking features
   - Touchdown ignores positive acceleration and uses median to select actual touchdown point
   - Touchdown uses standard median function rather than the masked array version as we should not have any masked values
   - Truck and Trailer amended to accept floating point arguments
 - Added
   - A300 Altitude Radio overflow correction
   - A318 Speedbrake
   - Calculate new fallback datetime based on the "flat" timebase
   - Eng Oil Press For 20 Sec During Cruise Max Key Point Value to measure high oil pressure in cruise is an indication of clogging orifices in the oil supply lines to the aft sump
   - power_ceil function added to library to calculate the closest power of 2 greater than or equal to x


v0.17.2
-------

 - Fixed
   - Fixes to v2 and airspeed at liftoff kpvs to handle fully masked phases
   - Reverted FlapLever and Flaperon to step_values
   - Fix to HeadingVariationTouchdownPlus4SecTo60KtsAirspeed for straight
     landings
   - Altitude At Last Flap Change Before Touchdown amended to ignore automatic
     flap extension (Saab 2000 is a case in point)
   - Calculate angles: angle fix stops invalid offsets
   - Fix calculate_angle parameter offsets
 - Improved
   - Gross Weight Smoothed: Fall back to Gross Weight if no Fuel Flow
   - ILS Approach Flight Phase amended to ensure aircraft is facing the ILS
     localizer in order to become established
   - Heading Variation on landing altered to ignore final turnoff
   - Amended speedbrake selected for G450 to take into account speedbrake
     handle
   - Calculate_surface_angle: align to angle frequency
   - Renamed "Rate Of Turn" with "Heading Rate" globally
   - Thrust reverser change for Embraer legacy
 - Added
   - G450 speedbrake addition
   - New surface angle algorithm
 - Other
   - Updated numpy requirements as numpy.full is used


v0.17.1
-------

 - Improved
   - Add B747 to Speedbrake Selected
   - Derive Rudder from upper and lower (no middle)
   - Unit test improvements
   - Vibrations: use second_window instead of moving_average to improve short
     peak filtering
   - Acceleration Normal events refined to avoid overlap with liftoff and
     touchdown periods
   - repair_mask added to GearDownSelected
   - Gear Down Selection aligned to 1Hz to avoid problems with 767-3A frame
   - Engine oil pressure max KPV amended to only operate in flight.
   - Hysteresis modified to accept zero or None thresholds, and raise an
     exception for negative thresholds.
   - step_values: scan_fwd start rounded down to include first sample of
     transition array
   - index_at_value assertion added to check that endpoint argument is
     recognised
   - step_values used index_at_value with unrecognised endpoint argument
   - ILS Frequency derived parameter amended to allow for different frequencies
     being set

V0.16.1
-------

 - Fixed
   - Fix to climb acceleration start KTI
   - Fix to blend_parameters for low frequency parameters
   - Fix to AltitudeAtLastFlapChangeBeforeTouchdown to cater for auto flap
     retraction at touchdown
   - Changed AltitudeRadioCleanConfigurationMin to use Altitude AAL
 - Improved
   - Unit test improvements
   - Altitude Overshoot improved to use Level Flight
   - Change to slices_or to try to reduce running time
   - Touchdown algorithm extended to cater for Saab 3000 special case
   - Small slice duration parameter added to blend_parameters
   - Change to AltitudeAtLastFlapChangeBeforeTouchdown to avoid auto flap
     retraction at touchdown
   - Configuration: use aircraft tables values
 - Added
   - Touchdown specific to Saab 2000
   - Airspeed minus flap manoeuvre speed for 3 sec
   - Added GearDownToLandingFlapConfigurationDuration
   - Ldg gear out of sequence use Flap Including Trans
   - Added EGT/N2/N3 exceeded redline duration KPVs


V0.15.1
-------

 - Imprevements
   - Avoid issubclass calls taking 20% of runtime
   - Add A310 family to correction of overflow in Altitude Radio
   - AltitudeAtFlapExtensionWithGearDown and AirspeedAtFlapExtension now uses Gear Down Selected.
   - Process flight supports -R short for --required
   - find_low_alts: Support relative start and stop Relative to minimum dip
   - GoAroundAndClimbout: relative start and stop Changed to match flight phases document. 500ft before and 2000ft after.
   - Stable Approach threshold adjusted for A320 family EPR Aircraft
 - Fixes
   - Fix plotting where it does not open a window on show()
   - TCASRAReactionDelay: peak_curvature may return None
   - Magnetic variation repair amended
 - Added
   - Airspeed with flap selection (KPV)
   - Eng EPR exceeding Redline duration (KPV)
   - Eng N1 exceeding Redline duration (KPV)


V0.14.1
-------

 - Improvements
   - Engine Vibrations are averaged over 8 seconds to limit the effect of transient spikes.
   - library.second_window has an option to automatically extend the window if the window size is incompatible.
   - Eng Start and Eng Stop detection is more robust when the flight data is corrupted or incomplete.
   - Rejected Takeoff improved to detect less obvious instances.
   - Control Column/Wheel Force Key Point Values limited to the Airborne flight phase.
   - Segment boundaries during splitting are forced to be 4 seconds for ARINC 767 data.
   - Stable Approach algorithm detection improved by broadening the criteria and averaging engine power for 8 seconds.
   - Plotting parameters with matplotlib creates subgraphs when requested for more configurable data inspection.
   - Eng Hotel Mode flight phases require Propeller Brake.
   - Stall Warning Duration Key Point Value.
   - Overspeed Duration Key Point Value.
   - Airspeed Minus Airspeed Selected For 3 Sec Key Point Value.
   - Clip library function removed from codebase as it has been replaced by second_window.
 - Fixes
   - Turbulence RMS g renamed to Turbulence.
   - The Altitude STD signal is not smoothed twice.
   - Speedbrake Handle error fixed when only one of (L), (R) or (C) parameters are available.
   - Node type has been fixed to be stored correctly when creating derived parameters.

V0.13.3
-------

 - Imprevements
   - Turbulence RMSG can now operate at 1hz
   - Rate of Climb below 10,000ft amended to remove spurious values triggered on the ground
   - Rate of Climb below 10,000ft (CAA KPV) amended to provide a single KPV per flight.
   - Rate of Descent below 10,000 ft (CAA KPV) amended to provide single value per flight.
   - Fixed frequency issue with gear up also changed to using Gear Up Selected to improve accuracy at gear extention.
   - Stick Shaker KPVs not created for segments less than one second.
   - Engine Start and Stop now work with Eng (*) Ng where available.
 - Fixes
   - Fixes to Gear parameters to correct Gear Retracting and prevent Gear Retracting
     and Gear Retracted phases overlapping
   - Split segments datetime correction logging
   - Correction to Takeoff Roll Or Rejected Takeoff phase
   - Groundspeed With Thrust Reversers Deployed Min to handle difference in frequencies


V0.13.2
-------

 - Imprevements
   - Fix to align now retains the data type of multistate parameter instead of forcing to int
   - changed speedbrake deployed to only use outboard spoilers
   - speedbrake fixes for ERJ-135 and Challenger 850
   - FlapAngle: Removed 787 combining slat
   - closest_unmasked_value: Always return 2 args
   - Handle Airspeed Selected being masked during t/off
   - consistent return type from step_values
 - KPVs Added
   - Airspeed Minus Flap Manoeuvre Speed For 3 Sec With Flap During Descent Min
   - Acceleration Lateral While Airborne Max


V0.13.1
-------

Flight Data Converter has been made timezone aware

 - Imprevements
   - Touchdown:
      - better handling when no clear normal acceleration in period tested
      - removed bias towards Gear On Ground
   - Taxiing: now takes into account rejected takeoffs
   - Libary slices: improved handling of floating point start and stops
   - Speedbrake Selected: Globals can process with eiter speedbrake or handle
   - ILS Localizer/Glideslope: added extra sources
   - V2 related nodes: Better handling of different frequencies encountered
   - Takeoff acceleration threshold increased to 0.15g to avoid enthusiastic
       taxiing being identified as a takeoff start.
   - Moving Average function reworked to operate better with masked data.
   - Airspeed relative now includes V2 comparison during takeoff phase.
   - Flap Manoeuvre Speed: now includes values for Climb
   - Gear Down Selected: retain gear down mask
 - Derived Parameters Added;
   - Brake Temperature Min/Max/Avg.
   - Speedbrake Deployed (Multistate).
   - Gear Up (Multistate).
   - Gear In Transition (Multistate).
   - Altitude Radio Offset Removed.
   - Kinetic Energy
   - Potential Energy
   - Aircraft Energy
 - KPVs Added
   - Throttle Lever at Liftoff
   - Brake Temp During Taxi In Max
   - Brake Temp After Touchdown Delta
   - V2 At Liftoff
   - V2 Lookup At Liftoff
   - Airspeed Selected At Liftoff
   - Airspeed Selected FMC Minus Flap Manoeuvre Speed 1000 to 5000 Ft Min
   - Kinetic Energy At Runway Turnoff
   - Aircraft Energy When Descending
 - Phases Added:
   - Takeoff Roll Or Rejected Takeoff
 - Fixes:
   - Parameter renames:
     - Airspeed Selected (MCP)
     - AP VNAV
     - Thrust Mode Selected
 - Derived Parameters Removed;
   - V2
   - V2 Lookup


V0.12.4
-------

 - Added (KPV): Pitch35ToClimbAccelerationStartMax/Min
 - Added (KPV): airspeed minus V2 35 ft to climb acceleration start KVPs
 - Improvement: _value min/max/max abs values to better handle start and stop edges
 - Improvement: Speedbrake Selected - Check if Speedbrake Armed is available for Airbuses
 - Improvement: ClimbAccelerationStart multiple
   - AAL first dep for freq
   - Manually aligns parameters
   - Fixed last freq divide
   - Support for analog spd_sel
   - Fix for low hz parameters
 - Fixed: AltitudeAAL bounced_sections alt comparison
 - Fixed: landing runway for parallel runways when ils established at start of approach
 - Fixed: most_common_value ignore negative values


V0.12.3
-------

 - ClimbAccelerationStart Throttle Lever and Np fallback, align to Altitude
   AAL.


V0.12.2
-------

 - ClimbAccelerationStart jet and prop alt fallbacks

V0.12.1
-------

 - Added ClimbAccelerationStart KTI
 - Optimisation: Replaced interp1d
 - Added Airspeed Selected blending parameter
 - library: Added power_floor function
 - Fixes for RejectedTakeoff
 - `copy` option for moving_average
 - Changed AirspeedMinusV2 to use Airspeed Selected
 - APVerticalMode: AT Active & Climb Mode Active
 - process_flight(): save the start_datetime to the HDF5
 - step_values: Improved mask handling
 - slices_from_to: trigger on dips and peaks
 - SpeedbrakeSelected: 757+767 handle algo changed
 - Don't break on time base errors, pass it back for the segments to be created
   in a database
 - Handle index == len(array) in closest_unmasked_val
 - Floor closest_unmasked_index values
 - Fix to takeoff following recent change

V0.11.3
-------
 - Fix to closest_unmasked_index to resolve problems with low frequency and
   high offset parameters creating KPV's ouside of segment slice.

v0.11.1
-------
 - Splitting algorithm improved to not split flights based on insignificant
   sections of high airspeed.
 - Detection of turning onto the runway improved to handle invalid data.
 - Derived Fuel Qty parameter now includes Fuel Qty (Tail) in aggregation.
 - Speedbrake parameter improved to support Global and G-IV aircraft families.
 - Speedbrake Selected parameter improved to support G-IV aircraft family.
 - blend_two_parameters amended to return a result of the correct sample rate
   if one parameter is faulty.
 - Flap and Flap Lever algorithm improved to handle masked sections of data
   between flap changes.
 - closest_unmasked_value rewritten to provide more consistent results.
 - Repairing sections of invalid data has been improved to support fill_start
   and fill_stop methods along with the default of interpolation.
 - ILS established below 0.8 dots to avoid transient events as the localizer
   falls below the event threshold.


v0.10.1
------
 - Change to magnetic variation from runway as magnetic variation should be
   difference from magnetic to true heading
 - fixed EngTorquePercent65KtsTo35FtMin
 - Fixed Eng Stop detection through interpolation
 - Renamed Selected Speed to Airspeed Selected following standardisation of
   parameter name
 - JSON tools: convert Nodes to and from JSON
 - KML: Improved coordinate param fallback code
 - Added local API logging to find file paths
 - Changes to accommodate aircraft with only Latitude (Coarse) and Longitude
   (Coarse) recorded.
 - fix to heading_diff to correct sign of returned value when not passing 0
 - KML: Altitude STD used in preference to AAL
 - KML: Fixed altitude param fallback
 - process_flight: Added verbose option
 - KML: Allow altitude parameter fallback.
 - process_flight: Fixed series and family args
 - Trap for rare error condition in Altitude AAL
 - Fixed derived parameter creation in kml writing
 - Write KML with any lat and lon, improved arguments
 - FlapManoeuvreSpeed: Fix for missing manufacturer attribute
 - Fixed test cases broken by assert_masked_array_almost_equal

v0.9.1
------
 - Fixed Fuel Qty parameter names (L and R)
 - Added FuelQtyWingDifferenceMax derived parameter
 - Takeoff5MinRating now usesTakeoffAccelerationStart
 - Amendment to _qnh_adjust to allow for the fact that the climb and descent
   phases don't start and end at the airfield
 - Fast section does not extrapolate, improved tests
 - FlapLeverSynthetic dependencies reflect mapping
 - Altitude smoothing added for Beech 1900D
 - Changed level_off_index to not bail after first masked data
 - Changed EngGasTempDuringEngStartMax search to 5 mins
 - ZeroFuelWeight changed to derived parameter
 - Align parameters used by APChannelsEngaged
 - Support case when input data is masked
 - Align the AP Engaged arguments
 - Added moving_average to AltitudeSTDSmoothed
 - Fix: V-Vapp wasn't following changing Vapp signal Invalid test case for
   superframe Vapp removed - not seen in LFLs
 - level_off_index will round up sample window sizes.
 - Fix for LastEngStop outside of data.
 - Fixed overflow_correction max_val in a320 test
 - find_toc_tod improved to use frequency in creating the slope


v0.8.1
------
 - fix for APVerticalMode where only flare mode is avaliable
 - added check for valid ils localiser data within approach for ils established
   flight phase
 - improvements to Altitude Radio overflow correction
 - optimisations in second_window()
 - global replacement of assert_almost_equal with
   assert_masked_array_almost_equal in library test and derived parameters
 - added missing "Eng (*) Fuel Flow Max"
 - added B777 Speedbrake Selected algorithm
 - EngStart and EngStop improved to ignore small power dips
 - rudder added as Derived Parameter, based on the three parts of a 777 rudder
 - fuel quantity data is repaired and gaps are smoothed over to create a more
   realistic reading than that of the recorded


v0.7.1
------
 - Velocity Speed Parameters and KPV's reworked
 - Improvements to detection of approaches starting below 3000ft
 - Improvements to TaxiOut, TaxiIn and Taxiing, now only includes before and after Eng Starts and Stop
 - Support for ERJ-170/175 & 190/195 Aircraft Families
 - Support for G-IV Aircraft Families
 - Support for Phemom 300 Aircraft Families
 - Library change - slices_remove_small_gaps now handles slices with None start or stop entries.
 - Library: added new function first_available_parameter()
 - Library: update function first_valid_parameter()
 - Added: AirspeedMinsToTouchdown
 - Added: APU On During Flight Duration
 - Added: DestinationAirport FlightAttributeNode
 - Added: derive parameters and kpvs for aircraft who record torque in percent
 - Added: check to Approach Range to check for valid glideslope data within the regression slice
 - Fix: Compasses initialised either side of North lead to 180deg error
 - Docs: Circular dependency updated
 - Docs: Dependency tree docs update
 - Docs: Autopilot documentation updated


v0.6.5
------
 - Force frequency and offset in GrossWeight to avoid interpolation error

v0.6.4
------
 - Airbus sidestick threshold increased to accommodate aircraft with one bit offsets on the inactive stick.
 - Pilot Flying identification by means of VHF usage removed

v0.6.3
-----
 - Fix to allow takeoff sections to start at the beginning of the data.

v0.6.2
------
 - Fix to flight number determination to ignore zero values.
 - Check for valid glideslope data within regression slice for approach range.

v0.6.1
------
 - Thrust Asymmetry now supports EPR asymmetry as a percentage value.
 - Split Segments splits the average of the normalised engine params (and Groundspeed)
   rather than the minimum of any of the individual params to fix early splits on
   single engine taxi in.


v0.5.2
------
 - Flap nodes which ignore 'Lever 0' state use string states rather than raw vals
 - TAWS Windshear detects climb as well as approach
 - Alpha floor only detect while Airborne
 - AP Engaged / Disengaged widened phase to Fast rather than Airborne
 - Takeoff and Landing Pilot identification fix for Pilot Flying parameter
   (currently on Airbus with sidesticks)
 - air_track for fitting lat/long smoothed tracks improved for long distances
 - Approach Range improved for Visual Approaches (no valid Glideslope) for
   approaches to airports with ILS installed
 - RTO ensures liftoff occurs within 30secs of potential RTO
 - Force Lat/Long to 1Hz for those with lower sample rates


v0.5.1
------

Improvements:
 - Units all use constants defined in FlightDataUtilities repository
 - Headwind improvement to use Airspeed as first dependency to increase hz
 - Pilot Flying (currently for Airbus Sidestick) added for Flight Attributes
   Takeoff Pilot and Landing Pilot.
 - Split Segments fix for DFC splits where incorrect engine split index was used
 - Gear Extending/Retracting use Gear Selected rather than Red Warnings directly
 - air_track accounts for airspeed calibration errors on really bad aircraft
 - Takeoff and Landing Roll work when no Pitch parameter available (yes, some
   really bad aircraft!)
 - Groundspeed established from Longitudinal Acceleration within Groundspeed
   During RTO Max
 - TAWS Alert can_operate method fix
 - Invalidate "Year" parameter before calculate timebase so we use the
   fallback_dt.year in its place.
 - create_kpvs_within_slices fix to rounding of start and stop edges
 - Improved smoothing of Heading and Altitude for Hercules aircraft
 - bearings_and_distances library routine improved for earth curvature
 - Multiple Go Around KPV improvements

Nodes added:
 - "Master Caution" merges multiple signals
 - "Pitch Above 1000 Ft Min" and "Pitch Above 1000 Ft Max"

Nodes removed:
 - Removed "Altitude STD At Lifoff" and "Altitude STD At Touchdown" KPVs
 - Removed "Configuration At Landing" KPV as we rely upon "Flap At Touchdown"


v0.4.1
------
 - A319, A320, A321 support - Flap Lever (Synthetic), Configuration and Speedbrake

Improvements:
 - climb flight phase added to Height Loss KPVs
 - AOA works from just one signal rather than relying on both (A) and (B)
 - Nodes support setting of aliases "hz" and "sample_rate" in place of frequency
 - Overflow correction fix 0.0 now does nothing rather than mask
 - TCAS RA uses recorded TCAS RA parameter (on Airbus) in preference to
   TCAS Combined Control (on Boeings)
 - Altitude correction for CRJ Alitiude Radio
 - Improve overflow correction for Altitude Radio
 - Split Segments supports GROUND_ONLY when no movement determined on ground
   based upon Heading.
 - FlapAtTouchdown KPVs all use the Flap Angle rather than the Flap Lever
 - process_flight supports stripping of hdf5 derived parameters for reprocessing
 - _value library now returns states (assumes order by that of raw value)
 - Master Warning inhibited when engines not running
 - ILS Established works better with low sample rate data and makes sure the
   aircraft path converges onto the beam and does not just pass through.
 - Flight Phase "Bottom Of Descent" revised to be more robust
 - Gross Weight at Liftoff and touchdown - catch repair errors where no valid data


v0.3.2
------

 - Fix to thrust_reversers_working indexing (including refactor of
   clump_multistate)


v0.3.1
------
 - Flap Angle supports more than two signals, including (C) and (MCP) channels
 - Improvements to Top Of Climb (find_toc_tod) and Bottom of Descent (uses just
   ClimbCruiseDescent) make climbs and descents more robust.
 - ILS Frequency only reports valid frequency if both (1) and (2) channels are
   recording same frequency.
 - Airspeed with Flap 0 and Slat something.
 - Support for Slat included in Flap Lever (Synthetic) to ensure slat only
   transitions are included.


v0.2.2
------
 - Fix to nodes to calculate a new offset when aligning to a higher frequency
   to ensure offset does not exceed the time of the first sample


v0.2.1
------
 - Added analyzer profiles
 - Support for CL-600 Aircraft Families
 - Support for A340 Aircraft Families
 - Support for BD-100 Aircraft Families
 - Speedbrake refactoring
 - Added Airbus KPV's
 - Support for ground runs
 - Support for slat stepping
 - Clip replaced with second_window
  - Improves speed
  - Corrects truncation of adjacent peaks


v0.1.1
------

 - Numerous improvements


v0.0.6
-----

 - Support for Beechcraft 1900D.
 - Improved liftoff detection algorithm.


v0.0.2
-----

 - Support for B757 / B767.


v0.0.1
------

 - Initial release directed at B737.
